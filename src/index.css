@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    /* Cyberpunk dark theme */
    --bg-primary: 240 10% 3.9%;
    --bg-secondary: 240 8% 8%;
    --bg-tertiary: 240 6% 12%;
    
    --neon-cyan: 180 100% 67%;
    --neon-orange: 25 100% 60%;
    --neon-purple: 270 100% 70%;
    --neon-gold: 45 100% 50%;
    
    --text-primary: 0 0% 95%;
    --text-secondary: 0 0% 70%;
    --text-muted: 0 0% 45%;
    
    --acoustic-color: 25 100% 60%;
    --light-color: 180 100% 67%;
    --gravity-color: 270 100% 70%;
    
    --panel-bg: 240 10% 3.9% / 0.95;
    --panel-border: 180 100% 67% / 0.2;
    
    /* Gradients */
    --gradient-primary: linear-gradient(135deg, hsl(var(--bg-primary)), hsl(var(--bg-secondary)), hsl(var(--bg-tertiary)));
    --gradient-neon: linear-gradient(45deg, hsl(var(--neon-cyan)), hsl(var(--neon-purple)));
    --gradient-acoustic: linear-gradient(45deg, hsl(var(--acoustic-color)), hsl(45 100% 50%));
    --gradient-light: linear-gradient(45deg, hsl(var(--light-color)), hsl(200 100% 60%));
    --gradient-gravity: linear-gradient(45deg, hsl(var(--gravity-color)), hsl(290 100% 65%));
    
    /* Shadows and glows */
    --shadow-neon: 0 0 20px hsl(var(--neon-cyan) / 0.5);
    --shadow-acoustic: 0 0 20px hsl(var(--acoustic-color) / 0.5);
    --shadow-light: 0 0 20px hsl(var(--light-color) / 0.5);
    --shadow-gravity: 0 0 20px hsl(var(--gravity-color) / 0.5);
    
    /* Legacy theme variables for compatibility */
    --background: var(--bg-primary);
    --foreground: var(--text-primary);
    --card: var(--bg-secondary);
    --card-foreground: var(--text-primary);
    --popover: var(--bg-secondary);
    --popover-foreground: var(--text-primary);
    --primary: var(--neon-cyan);
    --primary-foreground: var(--bg-primary);
    --secondary: var(--bg-tertiary);
    --secondary-foreground: var(--text-primary);
    --muted: var(--bg-tertiary);
    --muted-foreground: var(--text-muted);
    --accent: var(--neon-purple);
    --accent-foreground: var(--text-primary);
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: var(--text-primary);
    --border: var(--panel-border);
    --input: var(--bg-tertiary);
    --ring: var(--neon-cyan);
    --radius: 0.75rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;

    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;

    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }
}

@layer base {
  * {
    @apply border-border;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Courier New", monospace;
  }

  body {
    @apply bg-background text-foreground;
    background: var(--gradient-primary);
    min-height: 100vh;
  }
}

@layer components {
  /* Mode buttons */
  .mode-btn {
    @apply px-6 py-3 rounded-full font-bold tracking-wider text-black transition-all duration-300 hover:scale-105 shadow-lg;
  }
  
  .mode-btn.acoustic {
    background: var(--gradient-acoustic);
    box-shadow: var(--shadow-acoustic);
  }
  
  .mode-btn.light {
    background: var(--gradient-light);
    box-shadow: var(--shadow-light);
  }
  
  .mode-btn.gravity {
    background: var(--gradient-gravity);
    box-shadow: var(--shadow-gravity);
  }
  
  .mode-btn.active {
    @apply scale-105;
    animation: pulse-glow 2s ease-in-out infinite;
  }
  
  /* Control buttons */
  .control-btn {
    @apply px-4 py-2 rounded-lg border border-primary/30 bg-transparent text-primary font-semibold transition-all duration-300 hover:bg-primary hover:text-black hover:shadow-lg;
    box-shadow: inset 0 0 10px hsl(var(--primary) / 0.1);
  }
  
  /* Canvas styles */
  .canvas-container {
    @apply relative rounded-2xl border border-primary/20 overflow-hidden;
    background: radial-gradient(ellipse 120% 80% at 50% 40%, hsl(var(--bg-secondary)) 0%, hsl(var(--bg-primary)) 70%);
    backdrop-filter: blur(1px);
  }
  
  /* HUD styles */
  .hud-panel {
    @apply fixed top-4 right-4 rounded-xl border border-primary/30 p-4 backdrop-blur-md z-30;
    background: hsl(var(--panel-bg));
    box-shadow: var(--shadow-neon);
  }
  
  /* Node styles */
  .node {
    @apply absolute rounded-full transition-all duration-300;
  }
  
  .node-orchestrator {
    @apply w-6 h-6 -translate-x-1/2 -translate-y-1/2 z-10;
    background: hsl(var(--acoustic-color));
    box-shadow: var(--shadow-acoustic);
    animation: pulse-glow 2s ease-in-out infinite;
  }
  
  .node-agent {
    @apply w-3 h-3 -translate-x-1/2 -translate-y-1/2 z-10;
    background: hsl(var(--light-color));
    box-shadow: var(--shadow-light);
  }
  
  .node-agent.weak {
    @apply opacity-60;
    background: hsl(var(--text-muted));
    box-shadow: 0 0 6px hsl(var(--text-muted));
  }
  
  .node-agent.medium {
    background: hsl(var(--neon-gold));
    box-shadow: 0 0 12px hsl(var(--neon-gold));
  }
  
  .node-agent.strong {
    @apply scale-125;
    background: hsl(var(--light-color));
    box-shadow: var(--shadow-light);
  }
  
  /* Object styles */
  .object-wall {
    @apply absolute bg-gradient-to-r from-gray-600 to-gray-400 rounded-sm;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
  }
  
  .object-lens {
    @apply absolute rounded-full border-2 border-cyan-400/60;
    background: radial-gradient(circle, rgba(78,205,196,0.2) 0%, transparent 70%);
  }
  
  .object-mass {
    @apply absolute rounded-full border-2 border-purple-400/60;
    background: radial-gradient(circle, rgba(147,51,234,0.3) 0%, transparent 70%);
  }
  
  /* Effect styles - Enhanced for distinct mode broadcasts */
  .wave-ring {
    @apply absolute rounded-full pointer-events-none;
    border: 3px solid hsl(var(--light-color));
    animation: light-wave-expand 2s ease-out forwards;
  }
  
  .acoustic-wave {
    @apply absolute rounded-full pointer-events-none;
    border: 4px solid hsl(var(--acoustic-color));
    animation: acoustic-wave-expand 2.5s ease-out forwards;
    box-shadow: 0 0 20px hsl(var(--acoustic-color) / 0.6);
  }
  
  .echo-ring {
    @apply absolute rounded-full pointer-events-none;
    border: 3px dashed hsl(var(--acoustic-color));
    animation: echo-bounce 1.8s ease-out forwards;
    opacity: 0.8;
  }
  
  .light-smear {
    @apply absolute rounded-full pointer-events-none;
    background: radial-gradient(circle, hsl(var(--light-color) / 0.4) 0%, transparent 70%);
    animation: light-smear-pulse 1.8s ease-out forwards;
    box-shadow: 0 0 30px hsl(var(--light-color) / 0.5);
  }
  
  .light-ray {
    @apply absolute pointer-events-none;
    background: linear-gradient(90deg, hsl(var(--light-color)) 0%, transparent 100%);
    border-radius: 2px;
    animation: light-ray-shoot 1.2s ease-out forwards;
    box-shadow: 0 0 10px hsl(var(--light-color) / 0.8);
  }
  
  .gravity-metric {
    @apply absolute rounded-full pointer-events-none;
    background: radial-gradient(ellipse, hsl(var(--gravity-color) / 0.3) 0%, transparent 80%);
    animation: gravity-warp 3s ease-in-out infinite;
    border: 2px solid hsl(var(--gravity-color) / 0.5);
  }
  
  .gravity-wave {
    @apply absolute rounded-full pointer-events-none;
    border: 3px solid hsl(var(--gravity-color));
    animation: gravity-wave-expand 3s ease-out forwards;
    box-shadow: 0 0 25px hsl(var(--gravity-color) / 0.7);
  }
  
  /* Modal pin styles */
  .modal-pin {
    @apply absolute -translate-x-1/2 -translate-y-full rounded-lg border p-3 text-xs max-w-64 z-20;
    background: hsl(var(--bg-primary) / 0.95);
    backdrop-filter: blur(8px);
  }
  
  .modal-pin.acoustic {
    @apply border-orange-400/30 text-orange-200;
    box-shadow: 0 6px 20px hsl(var(--acoustic-color) / 0.3);
  }
  
  .modal-pin.light {
    @apply border-cyan-400/30 text-cyan-200;
    box-shadow: 0 6px 20px hsl(var(--light-color) / 0.3);
  }
  
  .modal-pin.gravity {
    @apply border-purple-400/30 text-purple-200;
    box-shadow: 0 6px 20px hsl(var(--gravity-color) / 0.3);
  }
  
  /* Badge styles */
  .task-badge {
    @apply absolute text-xs px-2 py-1 rounded-lg pointer-events-none opacity-0 transition-all duration-300 z-10;
    background: hsl(var(--bg-primary) / 0.9);
    border: 1px solid hsl(var(--light-color) / 0.3);
    color: hsl(var(--light-color));
  }
  
  .clock-badge {
    @apply absolute text-xs px-2 py-1 rounded-lg pointer-events-none opacity-0 transition-all duration-300 z-10;
    background: hsl(var(--gravity-color) / 0.2);
    border: 1px solid hsl(var(--gravity-color) / 0.5);
    color: hsl(var(--gravity-color));
  }
}

@layer utilities {
  /* Enhanced broadcast animations */
  @keyframes acoustic-wave-expand {
    0% {
      width: 4px;
      height: 4px;
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.8;
      transform: scale(1.1);
      box-shadow: 0 0 30px hsl(var(--acoustic-color) / 0.8);
    }
    100% {
      width: 400px;
      height: 400px;
      opacity: 0;
      transform: scale(1);
    }
  }
  
  @keyframes light-wave-expand {
    0% {
      width: 4px;
      height: 4px;
      opacity: 1;
      box-shadow: 0 0 10px hsl(var(--light-color));
    }
    30% {
      opacity: 0.9;
      box-shadow: 0 0 40px hsl(var(--light-color) / 0.8);
    }
    100% {
      width: 500px;
      height: 500px;
      opacity: 0;
      box-shadow: 0 0 60px hsl(var(--light-color) / 0.3);
    }
  }
  
  @keyframes gravity-wave-expand {
    0% {
      width: 4px;
      height: 4px;
      opacity: 1;
      transform: scale(1);
    }
    25% {
      opacity: 0.9;
      transform: scale(0.9);
      box-shadow: 0 0 50px hsl(var(--gravity-color) / 0.9);
    }
    50% {
      transform: scale(1.1);
    }
    100% {
      width: 450px;
      height: 450px;
      opacity: 0;
      transform: scale(1);
    }
  }
  
  @keyframes echo-bounce {
    0% {
      width: 4px;
      height: 4px;
      opacity: 0.8;
      transform: scale(1);
    }
    20% {
      transform: scale(1.2);
      opacity: 0.9;
    }
    40% {
      transform: scale(0.9);
    }
    60% {
      transform: scale(1.1);
    }
    100% {
      width: 300px;
      height: 300px;
      opacity: 0;
      transform: scale(1);
    }
  }
  
  @keyframes light-smear-pulse {
    0% {
      opacity: 0.6;
      transform: scale(0.8);
    }
    50% {
      opacity: 0.9;
      transform: scale(1.2);
    }
    100% {
      opacity: 0;
      transform: scale(1.4);
    }
  }
  
  @keyframes light-ray-shoot {
    0% {
      opacity: 1;
      transform: scale(1, 0.5);
    }
    50% {
      opacity: 0.8;
      transform: scale(1, 1);
    }
    100% {
      opacity: 0;
      transform: scale(1.5, 0.8);
    }
  }
  
  @keyframes gravity-warp {
    0%, 100% {
      transform: scale(1);
      opacity: 0.3;
    }
    50% {
      transform: scale(1.1);
      opacity: 0.6;
    }
  }
  
  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: 0 0 20px currentColor;
    }
    50% {
      box-shadow: 0 0 40px currentColor, 0 0 60px currentColor;
    }
  }
  
  @keyframes expand-fade {
    0% {
      width: 4px;
      height: 4px;
      opacity: 0.8;
    }
    100% {
      width: 400px;
      height: 400px;
      opacity: 0;
    }
  }
  
  @keyframes fade-out {
    0% {
      opacity: 0.6;
    }
    100% {
      opacity: 0;
    }
  }
  
  @keyframes pulse-metric {
    0%, 100% {
      transform: scale(1);
      opacity: 0.25;
    }
    50% {
      transform: scale(1.1);
      opacity: 0.5;
    }
  }
}
